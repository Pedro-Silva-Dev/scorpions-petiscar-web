<div class="row">
    <div class="col-12">
        <div class="page-header">
            <h5 class="title">Categorias</h5>
            <button (click)="displayModalCategory()" pTooltip="Adicionar" pButton pRipple type="button" icon="pi pi-plus" class="p-button-rounded p-button-primary p-button-outlined"></button>
        </div>
        <hr class="page-header">
        <div class="ui-card">
            <p-table [value]="categories">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Nome</th>
                        <th>Ações</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-category>
                    <tr>
                        <td>
                            {{category.name.toLowerCase()}}
                            <p-badge *ngIf="!category?.active" class="ms-1" value="Desabilitado"  severity="danger"  severity="danger"></p-badge>
                        </td>
                        <td>
                            <button (click)="displayModalCategory(category)" pTooltip="Editar" pButton pRipple type="button" icon="pi pi-pencil" class="me-2 p-button-primary p-button-rounded p-button-text"></button>
                            <button *ngIf="category?.active" (click)="updateStatusCategory(category)" pTooltip="Desabilitar" pButton pRipple type="button" icon="pi pi-times" class="p-button-primary p-button-rounded p-button-text"></button>
                            <button *ngIf="!category?.active" (click)="updateStatusCategory(category)" pTooltip="Habilitar" pButton pRipple type="button" icon="pi pi-check" class="p-button-primary p-button-rounded p-button-text"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<ng-container *ngIf="(modalCategoryEvent$ | async)">
    <app-modal-create-category
        (finishEvent$)="updateCategoryInPage($event)"
        [category]="category" [(display)]="isDisplayModal" 
    ></app-modal-create-category>
</ng-container>

<ng-container *ngIf="(categoryLoadEvent$ | async) || (categoryUpdateEvent$ | async)">
    <app-spinner></app-spinner>
</ng-container>

